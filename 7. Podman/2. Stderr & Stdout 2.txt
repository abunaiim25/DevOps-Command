

## üß© ‡¶ö‡ßÇ‡ßú‡¶æ‡¶®‡ßç‡¶§ ‡¶ì ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ (Container ‡¶≠‡ßá‡¶§‡¶∞‡ßá stdout/stderr log ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)

### **Step 1: ‡¶≤‡¶ó ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßã (Host Side)**
mkdir -p /root/logs

---

### **Step 2: Container ‡¶ö‡¶æ‡¶≤‡¶æ‡¶ì Tomcat ‡¶∏‡¶π**
podman run -d --name tomcat-https \
  -p 8443:8443 \
  -
  -v ./tomcat-conf/server.xml:/opt/tomcat/conf/server.xml:Z \
  -v /root/keystore.jks:/opt/tomcat/conf/keystore.jks:Z \
  -v /root/logs:/opt/tomcat/logs:Z \
  tomcat:8.0.53 \
  /opt/tomcat/bin/catalina.sh run > /opt/tomcat/logs/stdout.log 2> /opt/tomcat/logs/stderr.log

  /bin/sh -c "/opt/tomcat/bin/catalina.sh run >> /opt/tomcat/logs/stdout.log 2>> /opt/tomcat/logs/stderr.log"


üëâ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá `>>` ‡¶Æ‡¶æ‡¶®‡ßá `append` (‡¶®‡¶§‡ßÅ‡¶® log ‡¶Ü‡¶ó‡ßá‡¶∞‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶¨‡ßá)
üëâ `2>>` ‡¶Æ‡¶æ‡¶®‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ error (`stderr`) redirect ‡¶π‡¶¨‡ßá `stderr.log` ‡¶è

---

### **Step 3: Container ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶∞ catalina.sh ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßã**

Container ‡¶è ‡¶¢‡ßÅ‡¶ï‡ßá ‡¶Ø‡¶æ‡¶ì:

```bash
podman exec -it tomcat-https sh
```

‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ñ‡ßã‡¶≤‡ßã:

```bash
vi /opt/tomcat/bin/catalina.sh
```

‡¶è‡¶á ‡¶≤‡¶æ‡¶á‡¶®‡¶ü‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡ßã:

```bash
"$CATALINA_OUT" 2>&1 &
```

‡¶è‡¶ü‡¶æ replace ‡¶ï‡¶∞‡ßã ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡¶∞‡ßá:

```bash
>> "$CATALINA_BASE"/logs/stdout.log 2>> "$CATALINA_BASE"/logs/stderr.log &
```

‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßã, ‡¶¨‡ßá‡¶∞ ‡¶π‡ßü‡ßá ‡¶è‡¶∏‡ßã:

```
:wq
exit
```

---

### **Step 4: systemd ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßã**

```bash
sudo vi /etc/systemd/system/tomcat.service
```

‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßã:

```ini
[Unit]
Description=Tomcat Podman Container
After=network.target

[Service]
Restart=always
ExecStart=/usr/bin/podman start -a tomcat-https
ExecStop=/usr/bin/podman stop -t 10 tomcat-https

[Install]
WantedBy=multi-user.target
```

üß† **‡¶®‡ßã‡¶ü:**
`StandardOutput` ‡¶è‡¶¨‡¶Ç `StandardError` systemd ‡¶§‡ßá ‡¶è‡¶ñ‡¶® ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡ßá‡¶á, ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶§‡ßÅ‡¶Æ‡¶ø container ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶á ‡¶≤‡¶ó ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶õ‡ßã `/opt/tomcat/logs` ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá‡•§

---

### **Step 5: systemd reload ‡¶ï‡¶∞‡ßã**

```bash
sudo systemctl daemon-reexec
sudo systemctl daemon-reload
sudo systemctl restart tomcat
```

---

### **Step 6: Container ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶≤‡¶ó ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßã**

```bash
podman exec -it tomcat-https sh
cd /opt/tomcat/logs/
ls
```

‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶¨‡ßá:

```
catalina.out
stdout.log
stderr.log
localhost_access_log.*
```

‡¶è‡¶ñ‡¶®:

```bash
tail -f /opt/tomcat/logs/stdout.log
```

‡¶Ö‡¶•‡¶¨‡¶æ

```bash
tail -f /opt/tomcat/logs/stderr.log
cat
```

---

## ‚úÖ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤

‡¶è‡¶≠‡¶æ‡¶¨‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ container-‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶á `stdout` ‡¶Ü‡¶∞ `stderr` ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶≤‡¶ó ‡¶π‡¶¨‡ßá:

* `/opt/tomcat/logs/stdout.log` ‚Üí ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶Ü‡¶â‡¶ü‡¶™‡ßÅ‡¶ü
* `/opt/tomcat/logs/stderr.log` ‚Üí ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶¨‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶™‡¶∂‡¶®

‡¶Ü‡¶∞ ‡¶è‡¶á `/root/logs` host-‡¶è‡¶ì mirror ‡¶π‡¶¨‡ßá, ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶§‡ßÅ‡¶Æ‡¶ø volume mount ‡¶ï‡¶∞‡ßá‡¶õ‡ßã‡•§

---

