‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá ‡¶≠‡¶æ‡¶á üòé ‚Äî ‡¶ö‡¶≤ ‡¶è‡¶ï‡¶¶‡¶Æ **‡¶™‡ßç‡¶∞‡¶™‡¶æ‡¶∞ ‡¶ì ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®** ‡¶¨‡¶æ‡¶®‡¶æ‡¶á, ‡¶Ø‡¶æ‡¶§‡ßá **Tomcat container** ‡¶è‡¶∞ ‡¶∏‡¶¨ error `stderr.log` ‡¶è ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡¶æ‡ßü, ‡¶Ü‡¶∞ normal output `stdout.log` ‡¶è‡•§

---

## üß© Final & Clean Tomcat Logging Setup (Podman Container)

### üîπ Step 1: Host side ‡¶è log ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶®‡¶æ‡¶ì

```bash
mkdir -p /root/logs
```

---

### üîπ Step 2: Tomcat Container Run Command (Fixed Version ‚úÖ)

```bash
podman run -d --name tomcat-https-2 \
  -p 8440:8440 \
  -v ./tomcat-conf/server.xml:/opt/tomcat/conf/server.xml:Z \
  -v /root/keystore.jks:/opt/tomcat/conf/keystore.jks:Z \
  -v /root/logs:/opt/tomcat/logs:Z \
  tomcat:8.0.53 \
  /bin/sh -c '/opt/tomcat/bin/catalina.sh run 2>&1 | tee /opt/tomcat/logs/stdout.log | grep "SEVERE" > /opt/tomcat/logs/stderr.log'

---

### üß† ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ

* `>` ‚Üí ‡¶∂‡ßÅ‡¶ß‡ßÅ normal output (`stdout`)
* `2>` ‚Üí ‡¶∂‡ßÅ‡¶ß‡ßÅ error output (`stderr`)
* `exec` ‚Üí ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá ‡¶Ø‡ßá `/bin/sh` ‡¶®‡¶ø‡¶ú‡ßá‡¶á Tomcat process ‡¶è‡¶∞ PID 1 ‡¶®‡ßá‡ßü (‡¶®‡¶æ ‡¶π‡¶≤‡ßá signal/stop ‡¶†‡¶ø‡¶ï‡¶Æ‡¶§‡ßã ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ)

---

### üîπ Step 3: Container ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶≤‡¶ó ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßã

```bash
podman exec -it tomcat-https-2 sh
cd /opt/tomcat/logs/
ls
```

‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶¨‡ßá:

```
stdout.log
stderr.log
catalina.out
localhost_access_log.*
```

‡¶§‡¶æ‡¶∞‡¶™‡¶∞ real-time ‡¶≤‡¶ó ‡¶¶‡ßá‡¶ñ‡ßã:

```bash
tail -f stdout.log
```

‡¶¨‡¶æ error ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡¶§‡ßá:

```bash
tail -f stderr.log
```

---

### üîπ Step 4: systemd ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ (‡¶Ø‡¶¶‡¶ø container ‡¶ü‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶ö‡¶æ‡¶≤‡¶æ‡¶§‡ßá ‡¶ö‡¶æ‡¶ì)

```bash
sudo vi /etc/systemd/system/tomcat.service
```

‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶≤‡¶ø‡¶ñ‡ßã:

```ini
[Unit]
Description=Tomcat Podman Container
After=network.target

[Service]
Restart=always
ExecStart=/usr/bin/podman start -a tomcat-https
ExecStop=/usr/bin/podman stop -t 10 tomcat-https

[Install]
WantedBy=multi-user.target
```

‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßã:

```bash
sudo systemctl daemon-reexec
sudo systemctl daemon-reload
sudo systemctl enable --now tomcat
```

---

### ‚úÖ Final Result

‡¶è‡¶ñ‡¶® ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá:

| ‡¶≤‡¶ó ‡¶ü‡¶æ‡¶á‡¶™           | ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®                        |
| ----------------- | ----------------------------- |
| Normal Output     | `/opt/tomcat/logs/stdout.log` |
| Error / Exception | `/opt/tomcat/logs/stderr.log` |
| Host Mirror       | `/root/logs/`                 |

---

‡¶ö‡¶æ‡¶ì ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ï‡¶ü‡¶æ **compose-style YAML** ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡¶ì ‡¶¨‡¶æ‡¶®‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø ‚Äî future automation ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø üòâ
‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?
